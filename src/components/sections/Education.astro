---
import { getLangFromUrl, useTranslations } from "../../i18n";
import { educationData } from "../../data/education";

const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang);

const education = educationData[lang as keyof typeof educationData];
---

<section id="education" class="py-20 relative overflow-hidden">
  <!-- Background decorations -->
  <div class="absolute inset-0 opacity-30">
    <div class="absolute top-20 right-10 w-72 h-72 bg-purple-500/20 rounded-full blur-3xl"></div>
    <div class="absolute bottom-20 left-10 w-72 h-72 bg-green-500/20 rounded-full blur-3xl"></div>
  </div>

  <div class="container mx-auto px-4 relative z-10">
    <!-- Section Title -->
    <div class="text-center mb-12">
      <h2 class="text-4xl md:text-5xl font-bold mb-4 bg-gradient-to-r from-white via-green-300 to-purple-300 bg-clip-text text-transparent">
        {t('nav.education')}
      </h2>
    </div>

    <!-- Timeline -->
    <div class="max-w-4xl mx-auto">
      {education.map((edu, index) => (
        <div
          class={`education-item mb-12 relative opacity-0 translate-y-10 transition-all duration-700 delay-${index * 200}`}
          data-animate="true"
        >
          <div class="relative pl-8 pb-8 border-l-2 border-green-500/30 last:pb-0">
            {/* Timeline dot */}
            <div class="absolute -left-[9px] top-0 w-4 h-4 rounded-full bg-gradient-to-r from-green-500 to-purple-500 shadow-[0_0_10px_rgba(34,197,94,0.5)]"></div>
            
            <div class="group bg-gray-900/50 backdrop-blur-sm border border-white/10 rounded-2xl p-6 hover:border-green-400/30 transition-all duration-300 hover:shadow-[0_0_30px_rgba(34,197,94,0.2)] hover:scale-[1.02]">
              {/* Degree & Period */}
              <div class="flex flex-col md:flex-row md:items-start md:justify-between gap-2 mb-4">
                <h3 class="text-2xl font-bold text-white group-hover:text-green-300 transition-colors">
                  {edu.degree}
                </h3>
                <span class="text-sm text-gray-400 bg-gray-800/50 px-3 py-1 rounded-full w-fit">
                  {edu.period}
                </span>
              </div>
              
              {/* Institution */}
              <h4 class="text-xl text-green-400 font-semibold mb-2">
                {edu.institution}
              </h4>
              
              {/* Location */}
              <p class="text-sm text-gray-400 mb-4 flex items-center gap-2">
                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"></path>
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"></path>
                </svg>
                {edu.location}
              </p>
              
              {/* Description */}
              {edu.description && (
                <p class="text-gray-300 leading-relaxed">
                  {edu.description}
                </p>
              )}
            </div>
          </div>
        </div>
      ))}
    </div>
  </div>
</section>

<script>
  // Intersection Observer for scroll animations
  const observerOptions = {
    threshold: 0.1,
    rootMargin: '0px 0px -100px 0px'
  };

  const observer = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
      if (entry.isIntersecting) {
        entry.target.classList.remove('opacity-0', 'translate-y-10');
        entry.target.classList.add('opacity-100', 'translate-y-0');
      }
    });
  }, observerOptions);

  document.querySelectorAll('.education-item').forEach((item) => {
    observer.observe(item);
  });
</script>

<style>
  @keyframes fadeInUp {
    from {
      opacity: 0;
      transform: translateY(30px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  .education-item {
    animation-fill-mode: forwards;
  }
</style>
